<div class="p-6 max-w-5xl mx-auto">
  <h1 class="text-2xl font-semibold mb-4">Documents</h1>

  <form class="grid gap-3 md:grid-cols-3 items-end mb-6" (ngSubmit)="onUpload()" #f="ngForm">
    <div class="md:col-span-1">
      <label class="block text-sm mb-1">Title</label>
      <input name="title" [(ngModel)]="title" required class="w-full border rounded px-3 py-2" placeholder="Document title" />
    </div>
    <div class="md:col-span-1">
      <label class="block text-sm mb-1">Description</label>
      <input name="description" [(ngModel)]="description" class="w-full border rounded px-3 py-2" placeholder="Optional" />
    </div>
    <div class="md:col-span-1">
      <label class="block text-sm mb-1">File</label>
      <input type="file" (change)="onFile($event)" accept=".pdf,.doc,.docx,.jpg,.jpeg,.png" class="w-full" />
    </div>
    <div class="md:col-span-3">
      <button class="bg-indigo-600 text-white px-4 py-2 rounded" [disabled]="!title || !file">Upload</button>
    </div>
  </form>

  <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
    <div *ngFor="let d of docs" class="border rounded p-3 bg-white/70">
      <ng-container *ngIf="editingId !== d._id; else editTpl">
        <div class="font-medium">{{ d.title }}</div>
        <div class="text-sm text-gray-600 truncate">{{ d.fileName }}</div>
        <div class="text-xs text-gray-500">{{ d.mimeType }} â€¢ {{ d.size | number }} bytes</div>
        <div class="mt-2 flex gap-3 text-sm">
          <button (click)="onDownload(d)" class="text-indigo-600">Download</button>
          <button (click)="startEdit(d)" class="text-gray-700">Edit</button>
          <button (click)="onDelete(d)" class="text-red-600">Delete</button>
        </div>
      </ng-container>
      <ng-template #editTpl>
        <div class="space-y-2">
          <input [(ngModel)]="editTitle" class="w-full border rounded px-3 py-2" placeholder="Title" />
          <input [(ngModel)]="editDescription" class="w-full border rounded px-3 py-2" placeholder="Description (optional)" />
          <input type="file" (change)="onEditFile($event)" accept=".pdf,.doc,.docx,.jpg,.jpeg,.png" />
          <div class="flex gap-2">
            <button (click)="saveEdit(d)" class="bg-indigo-600 text-white px-3 py-1 rounded">Save</button>
            <button (click)="cancelEdit()" class="px-3 py-1 rounded border">Cancel</button>
          </div>
        </div>
      </ng-template>
    </div>
  </div>
</div>

